# -*- coding: utf-8 -*-
"""
  Copyright 2018 INFN (Italy)

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
"""
import os
import sys
import getopt
import glob
import json
reload(sys)
sys.setdefaultencoding('utf8')

__author__ = 'marco'
from marcjsonconverter.converter.converter import Converter


#marcxml = "<record>\n  <controlfield tag=\"001\">20539</controlfield>\n  <controlfield tag=\"005\">20151201145738.0</controlfield>\n  <datafield tag=\"024\" ind1=\"7\" ind2=\" \">\n    <subfield code=\"a\">10.15161/oar.it/1448977154.34</subfield>\n    <subfield code=\"2\">DOI</subfield>\n  </datafield>\n  <datafield tag=\"245\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">Second Order Harmonics Suppression With Glass Filters for Synchrotron UV Radiation Calibration Measurement</subfield>\n  </datafield>\n  <datafield tag=\"520\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">This development is the latest result of the cooperation between the National Laboratories of Frascati and the Department of Astronomy and Space Science of the University of Florence to improve the capabilities of the existing DXR-2 beam line at the DAΦNE-LIGHT laboratories. This collaboration has assessed a new facility in order to characterize optics and sensors in a wide spectral range (ranging from VUV to IR). Previous measurements [1] have highlighted some limitations in the present setup, as higher signal levels due to the diffracted radiation of the grating in the second order have to be removed to allow an accurate detection. In this work a glass filter is used to remove such spurious signal present in the spectral region with λ>360 nm. The characteristics of the filter and its application to the optical system used to measure the sensitivity of a diamond-based photoconductor have been discussed.</subfield>\n  </datafield>\n  <datafield tag=\"300\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">6</subfield>\n  </datafield>\n  <datafield tag=\"653\" ind1=\"1\" ind2=\" \">\n    <subfield code=\"a\">LNF - 05 / 11(IR)</subfield>\n  </datafield>\n  <datafield tag=\"653\" ind1=\"1\" ind2=\" \">\n    <subfield code=\"a\">Internal Note</subfield>\n  </datafield>\n  <datafield tag=\"653\" ind1=\"1\" ind2=\" \">\n    <subfield code=\"a\">Nota Interna</subfield>\n  </datafield>\n  <datafield tag=\"100\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">E. Burattini</subfield>\n  </datafield>\n  <datafield tag=\"700\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">A. De Sio</subfield>\n  </datafield>\n  <datafield tag=\"700\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">L. Gambicorti</subfield>\n  </datafield>\n  <datafield tag=\"700\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">F. Malvezzi</subfield>\n  </datafield>\n  <datafield tag=\"700\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">A. Marcelli</subfield>\n  </datafield>\n  <datafield tag=\"700\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">F. Monti</subfield>\n  </datafield>\n  <datafield tag=\"700\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">E. Pace</subfield>\n  </datafield>\n  <datafield tag=\"856\" ind1=\"4\" ind2=\" \">\n    <subfield code=\"u\">http://www.openaccessrepository.it/record/20539/files/LNF-05-11%28IR%29.pdf</subfield>\n  </datafield>\n  <datafield tag=\"260\" ind1=\" \" ind2=\" \">\n    <subfield code=\"c\">2005-07-14</subfield>\n  </datafield>\n  <datafield tag=\"980\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">PUBLICATIONINFN</subfield>\n  </datafield>\n  <datafield tag=\"540\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">cc-by-nc-nd-4.0</subfield>\n    <subfield code=\"u\">https://creativecommons.org/licenses/by-nc-nd/4.0/</subfield>\n  </datafield>\n  <datafield tag=\"041\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">eng</subfield>\n  </datafield>\n  <datafield tag=\"042\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">Researchers</subfield>\n  </datafield>\n  <datafield tag=\"043\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">info:eu-repo/semantics/article</subfield>\n  </datafield>\n</record>"
#marcxml = "<record>\n  <controlfield tag=\"001\">11344</controlfield>\n  <controlfield tag=\"005\">20151105114550.0</controlfield>\n  <datafield tag=\"022\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">1347-4081</subfield>\n  </datafield>\n  <datafield tag=\"024\" ind1=\"7\" ind2=\" \">\n    <subfield code=\"a\">10.1093/ptep/ptv106</subfield>\n    <subfield code=\"2\">DOI</subfield>\n    <subfield code=\"t\">2015-08-10T10:03:43Z</subfield>\n  </datafield>\n  <datafield tag=\"037\" ind1=\" \" ind2=\" \">\n    <subfield code=\"9\">arXiv</subfield>\n    <subfield code=\"a\">arXiv:1504.02266</subfield>\n  </datafield>\n  <datafield tag=\"100\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">Harigaya, Keisuke</subfield>\n    <subfield code=\"v\">ICRR, University of Tokyo, Kashiwa, 277-8582, Japan</subfield>\n    <subfield code=\"v\">Kavli IPMU (WPI), UTIAS, University of Tokyo, Kashiwa, 277-8583, Japan</subfield>\n    <subfield code=\"m\">keisukeh@icrr.u-tokyo.ac.jp</subfield>\n    <subfield code=\"w\">Japan</subfield>\n  </datafield>\n  <datafield tag=\"245\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">Seminatural SUSY from the E 7 nonlinear sigma model</subfield>\n  </datafield>\n  <datafield tag=\"260\" ind1=\" \" ind2=\" \">\n    <subfield code=\"c\">2015-08-06</subfield>\n    <subfield code=\"b\">Oxford University Press/Physical Society of Japan</subfield>\n  </datafield>\n  <datafield tag=\"300\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">15</subfield>\n  </datafield>\n  <datafield tag=\"520\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">We present a new focus point supersymmetry-breaking scenario based on the supersymmetric nonlinear sigma model. In this model, squarks and sleptons are identified with (pseudo) Nambu–Goldstone bosons. Their masses are generated only radiatively through gauge and Yukawa interactions, and they are much smaller than the gravitino and gaugino masses at a high energy scale. On the other hand, Higgs doublets belong to matter multiplets and hence may have unsuppressed supersymmetry-breaking soft masses. We consider their masses to be equal to the gravitino mass at the high energy scale, assuming the minimal Kähler potential for Higgs doublets. We show that the fine-tuning measure of the electroweak symmetry-breaking scale is reduced significantly to , if the ratio of the gravitino mass to the gaugino mass is around . Also, the prospects for the discovery/exclusion of supersymmetric particles at the Large Hadron Collider and dark matter direct detection experiments are discussed.</subfield>\n    <subfield code=\"9\">Oxford</subfield>\n  </datafield>\n  <datafield tag=\"540\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">CC-BY-3.0</subfield>\n    <subfield code=\"u\">http://creativecommons.org/licenses/by/3.0/</subfield>\n  </datafield>\n  <datafield tag=\"542\" ind1=\" \" ind2=\" \">\n    <subfield code=\"f\">© The Author(s) 2015</subfield>\n  </datafield>\n  <datafield tag=\"700\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">Yanagida, Tsutomu T.</subfield>\n    <subfield code=\"v\">Kavli IPMU (WPI), UTIAS, University of Tokyo, Kashiwa, 277-8583, Japan</subfield>\n    <subfield code=\"m\">keisukeh@icrr.u-tokyo.ac.jp</subfield>\n    <subfield code=\"w\">Japan</subfield>\n  </datafield>\n  <datafield tag=\"700\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">Yokozaki, Norimi</subfield>\n    <subfield code=\"v\">INFN, Sezione di Roma, Piazzale A. Moro 2, I-00185 Roma, Italy</subfield>\n    <subfield code=\"m\">keisukeh@icrr.u-tokyo.ac.jp</subfield>\n    <subfield code=\"w\">Italy</subfield>\n  </datafield>\n  <datafield tag=\"773\" ind1=\" \" ind2=\" \">\n    <subfield code=\"p\">PTEP</subfield>\n    <subfield code=\"v\">2015</subfield>\n    <subfield code=\"n\">8</subfield>\n    <subfield code=\"c\">083B03</subfield>\n    <subfield code=\"y\">2015</subfield>\n  </datafield>\n  <datafield tag=\"856\" ind1=\"4\" ind2=\" \">\n    <subfield code=\"u\">http://www.openaccessrepository.it/record/11344/files/main.pdf</subfield>\n  </datafield>\n  <datafield tag=\"856\" ind1=\"4\" ind2=\" \">\n    <subfield code=\"u\">http://www.openaccessrepository.it/record/11344/files/main.xml</subfield>\n  </datafield>\n  <datafield tag=\"909\" ind1=\"C\" ind2=\"O\">\n    <subfield code=\"o\">oai:www.openaccessrepository.it:11344</subfield>\n    <subfield code=\"p\">openaire</subfield>\n    <subfield code=\"p\">publication:infn</subfield>\n  </datafield>\n  <datafield tag=\"980\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">PUBLICATIONINFN</subfield>\n  </datafield>\n  <datafield tag=\"041\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">eng</subfield>\n  </datafield>\n  <datafield tag=\"042\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">Researchers</subfield>\n  </datafield>\n  <datafield tag=\"043\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">info:eu-repo/semantics/article</subfield>\n  </datafield>\n</record>"
#marcxml = "<record>\n  <controlfield tag=\"001\">21230</controlfield>\n  <controlfield tag=\"005\">20180430175923.0</controlfield>\n  <datafield tag=\"037\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">PUBLICATIONINFN-2018-001</subfield>\n  </datafield>\n  <datafield tag=\"041\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">eng</subfield>\n  </datafield>\n  <datafield tag=\"100\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">R. Barbera</subfield>\n  </datafield>\n  <datafield tag=\"245\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">A Study to Define a Linked Open Data Platform of Interoperable Repositories to Enable Open Science</subfield>\n  </datafield>\n  <datafield tag=\"024\" ind1=\"7\" ind2=\" \">\n    <subfield code=\"a\">10.15161/oar.it/1525110414.75</subfield>\n  </datafield>\n  <datafield tag=\"260\" ind1=\" \" ind2=\" \">\n    <subfield code=\"c\">2018-03-23</subfield>\n  </datafield>\n  <datafield tag=\"300\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">3</subfield>\n  </datafield>\n  <datafield tag=\"500\" ind1=\" \" ind2=\" \">\n    <subfield code=\"b\">cc-by-4.0</subfield>\n  </datafield>\n  <datafield tag=\"520\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">The document is a proposal for a Scoping Group of the OECD Global Science Forum,  whose main objective is to carry out a study and deliver a report on enablers, obstacles, policies and recommendations for the setup of a cross-country federation of standard-based, multi-domain Linked Open Data repositories leveraging as well as addressing the concept of Open Science.</subfield>\n  </datafield>\n  <datafield tag=\"653\" ind1=\"1\" ind2=\" \">\n    <subfield code=\"a\">OECD</subfield>\n  </datafield>\n  <datafield tag=\"653\" ind1=\"1\" ind2=\" \">\n    <subfield code=\"a\">GSF</subfield>\n  </datafield>\n  <datafield tag=\"653\" ind1=\"1\" ind2=\" \">\n    <subfield code=\"a\">Open Access</subfield>\n  </datafield>\n  <datafield tag=\"653\" ind1=\"1\" ind2=\" \">\n    <subfield code=\"a\">Open Science</subfield>\n  </datafield>\n  <datafield tag=\"653\" ind1=\"1\" ind2=\" \">\n    <subfield code=\"a\">Linked Open Data</subfield>\n  </datafield>\n  <datafield tag=\"653\" ind1=\"1\" ind2=\" \">\n    <subfield code=\"a\">Interoperability</subfield>\n  </datafield>\n  <datafield tag=\"700\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">S. Bianco</subfield>\n  </datafield>\n  <datafield tag=\"700\" ind1=\" \" ind2=\" \">\n  <subfield code=\"a\">M. Maggi</subfield>\n  </datafield>\n  <datafield tag=\"700\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">D. Menasce</subfield>\n  </datafield>\n  <datafield tag=\"700\" ind1=\" \" ind2=\" \">\n <subfield code=\"a\">L. Patrizii</subfield>\n  </datafield>\n  <datafield tag=\"700\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">M. Saccone</subfield>\n  </datafield>\n  <datafield tag=\"700\" ind1=\" \" ind2=\" \">\n  <subfield code=\"a\">L. Trufelli</subfield>\n  </datafield>\n  <datafield tag=\"700\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">L. Reggiani</subfield>\n  </datafield>\n  <datafield tag=\"700\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">R. Smareglia</subfield>\n  </datafield>\n  <datafield tag=\"700\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">P. Budroni</subfield>\n  </datafield>\n  <datafield tag=\"700\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">L. Alagna</subfield>\n  </datafield>\n  <datafield tag=\"700\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">A. Masiero</subfield>\n  </datafield>\n  <datafield tag=\"856\" ind1=\"0\" ind2=\" \">\n    <subfield code=\"f\">roberto.barbera@ct.infn.it</subfield>\n  </datafield>\n  <datafield tag=\"856\" ind1=\"4\" ind2=\" \">\n    <subfield code=\"u\">http://www.openaccessrepository.it/record/21230/files/PUBLICATIONINFN-2018-001.pdf</subfield>\n  </datafield>\n  <datafield tag=\"980\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">PUBLICATIONINFN</subfield>\n  </datafield>\n</record>"
#marcxml = "<record>\n  <controlfield tag=\"001\">16656</controlfield>\n  <controlfield tag=\"005\">20151030083825.0</controlfield>\n  <datafield tag=\"037\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">arXiv:1009.1846v1</subfield>\n    <subfield code=\"9\">arXiv</subfield>\n  </datafield>\n  <datafield tag=\"245\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">The land of deformation south of $^{68}$Ni</subfield>\n  </datafield>\n  <datafield tag=\"520\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">We study the development of collectivity in the neutron-rich nuclei around\n$N=40$, where experimental and theoretical evidences suggest a rapid shape\nchange from the spherical to the rotational regime, in analogy to what happens\nat the {\\it island of inversion} surrounding $^{31}$Na. Theoretical\ncalculations are performed within the interacting shell model framework in a\nlarge valence space, based on a $^{48}$Ca core which encompasses the full $pf$\nshell for the protons and the $0f_{5/2}$, $1p_{3/2}$, $1p_{1/2}$, $0g_{9/2}$\nand $1d_{5/2}$ orbits for the neutrons. The effective interaction is based on a\nG-matrix obtained from a realistic nucleon-nucleon potential whose monopole\npart is corrected empirically to produce effective single particle energies\ncompatible with the experimental data. We find a good agreement between the\ntheoretical results and the available experimental data. We predict the onset\nof deformation at different neutron numbers for the various isotopic chains.\nThe maximum collectivity occurs in the chromium isotopes, where the large\ndeformation regime starts already at $N=38$. The shell evolution responsible\nfor the observed shape changes is discussed in detail, in parallel to the\nsituation in the $N=20$ region.</subfield>\n  </datafield>\n  <datafield tag=\"100\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">Silvia Lenzi</subfield>\n    <subfield code=\"v\">INFN, Sezione di Padova</subfield>\n  </datafield>\n  <datafield tag=\"700\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">Frédéric Nowacki</subfield>\n    <subfield code=\"v\">DRS-IPHC</subfield>\n  </datafield>\n  <datafield tag=\"700\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">Alfredo Poves</subfield>\n    <subfield code=\"v\">UAM</subfield>\n  </datafield>\n  <datafield tag=\"700\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">Sieja Kamila</subfield>\n    <subfield code=\"v\">DRS-IPHC</subfield>\n  </datafield>\n  <datafield tag=\"856\" ind1=\"4\" ind2=\" \">\n    <subfield code=\"u\">http://www.openaccessrepository.it/record/16656/files/1009.pdf</subfield>\n  </datafield>\n  <datafield tag=\"650\" ind1=\"1\" ind2=\"7\">\n    <subfield code=\"a\">nucl-th</subfield>\n  </datafield>\n  <datafield tag=\"980\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">PUBLICATIONINFN</subfield>\n  </datafield>\n  <datafield tag=\"041\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">eng</subfield>\n  </datafield>\n  <datafield tag=\"042\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">Researchers</subfield>\n  </datafield>\n  <datafield tag=\"043\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">info:eu-repo/semantics/article</subfield>\n  </datafield>\n  <datafield tag=\"024\" ind1=\"7\" ind2=\" \">\n    <subfield code=\"a\">10.15161/oar.it/1446126812.11</subfield>\n    <subfield code=\"2\">DOI</subfield>\n  </datafield>\n  <datafield tag=\"540\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">cc-by-nc-nd-4.0</subfield>\n    <subfield code=\"u\">https://creativecommons.org/licenses/by-nc-nd/4.0/</subfield>\n  </datafield>\n</record>"
#marcxml = "<record>\n  <controlfield tag=\"001\">17335</controlfield>\n  <controlfield tag=\"005\">20151104180405.0</controlfield>\n  <datafield tag=\"037\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">SOFTWAREINFNALICE-2015-001</subfield>\n  </datafield>\n  <datafield tag=\"041\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">eng</subfield>\n  </datafield>\n  <datafield tag=\"100\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">The ALICE Collaboration</subfield>\n  </datafield>\n  <datafield tag=\"245\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">ALICE Virtual Machine for Master Classes and other Analyses' reproducibility</subfield>\n  </datafield>\n  <datafield tag=\"024\" ind1=\"7\" ind2=\" \">\n    <subfield code=\"a\">10.15161/oar.it/1446656644.24</subfield>\n  </datafield>\n  <datafield tag=\"260\" ind1=\" \" ind2=\" \">\n    <subfield code=\"c\">2015-11-04</subfield>\n  </datafield>\n  <datafield tag=\"300\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">mult. p</subfield>\n  </datafield>\n  <datafield tag=\"500\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">ALICE, UNICT</subfield>\n  </datafield>\n  <datafield tag=\"500\" ind1=\" \" ind2=\" \">\n    <subfield code=\"b\">cc-zero</subfield>\n  </datafield>\n  <datafield tag=\"520\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">Virtual Machine (VM) image containing the ALICE software environment which allows to access the datasets contained in http://www.openaccessrepository.it/collection/DATASET%20INFN%20ALICE and re-produce/extend the analyses contained in http://www.openaccessrepository.it/collection/SOFTWARE%20INFN%20ALICE</subfield>\n  </datafield>\n  <datafield tag=\"653\" ind1=\"1\" ind2=\" \">\n    <subfield code=\"a\">ALICE ;</subfield>\n  </datafield>\n  <datafield tag=\"653\" ind1=\"1\" ind2=\" \">\n    <subfield code=\"a\">LHC ; </subfield>\n  </datafield>\n  <datafield tag=\"653\" ind1=\"1\" ind2=\" \">\n    <subfield code=\"a\">CERN ; </subfield>\n  </datafield>\n  <datafield tag=\"653\" ind1=\"1\" ind2=\" \">\n    <subfield code=\"a\">VM ; </subfield>\n  </datafield>\n  <datafield tag=\"653\" ind1=\"1\" ind2=\" \">\n    <subfield code=\"a\">VRE ; </subfield>\n  </datafield>\n  <datafield tag=\"653\" ind1=\"1\" ind2=\" \">\n    <subfield code=\"a\">Elementary Particle Physics ; </subfield>\n  </datafield>\n  <datafield tag=\"653\" ind1=\"1\" ind2=\" \">\n    <subfield code=\"a\">Science Gateway; </subfield>\n  </datafield>\n  <datafield tag=\"653\" ind1=\"1\" ind2=\" \">\n    <subfield code=\"a\">UNICT</subfield>\n  </datafield>\n  <datafield tag=\"856\" ind1=\"0\" ind2=\" \">\n    <subfield code=\"f\">giuseppina.inserra@ct.infn.it</subfield>\n  </datafield>\n  <datafield tag=\"856\" ind1=\"4\" ind2=\" \">\n    <subfield code=\"u\">http://www.openaccessrepository.it/record/17335/files/SOFTWAREINFNALICE-2015-001.qcow2</subfield>\n  </datafield>\n  <datafield tag=\"980\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">SOFTWAREINFNALICE</subfield>\n  </datafield>\n</record>"

#marcxml = "<record>\n  <controlfield tag=\"001\">2</controlfield>\n  <controlfield tag=\"005\">20140331093137.0</controlfield>\n  <datafield tag=\"037\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">CERN-EX-0104007</subfield>\n  </datafield>\n  <datafield tag=\"100\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">Patrice Loïez</subfield>\n  </datafield>\n  <datafield tag=\"245\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">The first CERN-built module of the barrel section of ATLAS's electromagnetic calorimeter</subfield>\n  </datafield>\n  <datafield tag=\"246\" ind1=\" \" ind2=\"1\">\n    <subfield code=\"a\">Premier module du tonneau du calorimètre electromagnétique d'ATLAS</subfield>\n  </datafield>\n  <datafield tag=\"260\" ind1=\" \" ind2=\" \">\n    <subfield code=\"c\">10 Apr 2001</subfield>\n  </datafield>\n  <datafield tag=\"340\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">DIGITAL</subfield>\n  </datafield>\n  <datafield tag=\"520\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">Behind the module, left to right Ralf Huber, Andreas Bies and Jorgen Beck Hansen. In front of the module, left to right: Philippe Lançon and Edward Wood.</subfield>\n  </datafield>\n  <datafield tag=\"590\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">Derrière le module, de gauche à droite: Ralf Huber, Andreas Bies, Jorgen Beck Hansen. Devant le module, de gauche à droite : Philippe Lançon et Edward Wood.</subfield>\n  </datafield>\n  <datafield tag=\"595\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">CERN EDS</subfield>\n  </datafield>\n  <datafield tag=\"650\" ind1=\"1\" ind2=\"7\">\n    <subfield code=\"2\">SzGeCERN</subfield>\n    <subfield code=\"a\">Experiments and Tracks</subfield>\n  </datafield>\n  <datafield tag=\"856\" ind1=\"0\" ind2=\" \">\n    <subfield code=\"f\">marie.noelle.pages.ribeiro@cern.ch</subfield>\n  </datafield>\n  <datafield tag=\"856\" ind1=\"4\" ind2=\" \">\n    <subfield code=\"u\">http://opendata.ct.infn.it/record/2/files/0104007_02.jpeg</subfield>\n  </datafield>\n  <datafield tag=\"856\" ind1=\"4\" ind2=\" \">\n    <subfield code=\"u\">http://opendata.ct.infn.it/record/2/files/0104007_02.gif?subformat=icon</subfield>\n    <subfield code=\"x\">icon</subfield>\n  </datafield>\n  <datafield tag=\"909\" ind1=\"C\" ind2=\"0\">\n    <subfield code=\"o\">0003601PHOPHO</subfield>\n  </datafield>\n  <datafield tag=\"909\" ind1=\"C\" ind2=\"0\">\n    <subfield code=\"y\">2001</subfield>\n  </datafield>\n  <datafield tag=\"909\" ind1=\"C\" ind2=\"0\">\n    <subfield code=\"b\">81</subfield>\n  </datafield>\n  <datafield tag=\"909\" ind1=\"C\" ind2=\"1\">\n    <subfield code=\"c\">2001-04-23</subfield>\n    <subfield code=\"l\">50</subfield>\n    <subfield code=\"m\">2001-06-18</subfield>\n    <subfield code=\"o\">CM</subfield>\n  </datafield>\n  <datafield tag=\"909\" ind1=\"C\" ind2=\"K\">\n    <subfield code=\"b\">0020699</subfield>\n    <subfield code=\"l\">ADMBUL</subfield>\n    <subfield code=\"t\">CERN Bulletin 18/2001 : 30 April 2001 (English)</subfield>\n  </datafield>\n  <datafield tag=\"909\" ind1=\"C\" ind2=\"K\">\n    <subfield code=\"b\">0020700</subfield>\n    <subfield code=\"l\">ADMBUL</subfield>\n    <subfield code=\"t\">CERN Bulletin 18/2001 : 30 avril 2001 (French)</subfield>\n  </datafield>\n  <datafield tag=\"909\" ind1=\"C\" ind2=\"P\">\n    <subfield code=\"p\">Bldg. 184</subfield>\n  </datafield>\n  <datafield tag=\"909\" ind1=\"C\" ind2=\"P\">\n    <subfield code=\"r\">Fassnacht, P</subfield>\n  </datafield>\n  <datafield tag=\"909\" ind1=\"C\" ind2=\"S\">\n    <subfield code=\"s\">n</subfield>\n    <subfield code=\"w\">200231</subfield>\n  </datafield>\n  <datafield tag=\"980\" ind1=\" \" ind2=\" \">\n    <subfield code=\"a\">PICTURE</subfield>\n  </datafield>\n</record>"





def main():
    base_doi_filter = None
    communities = ""
    input_folder = "."
    input_file = "*.json"
    output_file = "stdout"
    try:
        opts, rem = getopt.gnu_getopt(sys.argv[1:], "f:i:o:d:c:", ["ffile=", "ifile=", "ofile=", "doi=", "communities="])
    except getopt.GetoptError:
        print ("main.py -f <inputfolder> -i <inputfile> -o <outputfile> <collection>")
        sys.exit(2)
    for opt, arg in opts:
        if opt in ("-f", "--ffile"):
            input_folder = arg
        if opt in ("-i", "--ifile"):
            input_file = arg
        if opt in ("-o", "--ofile"):
            output_file = arg
        if opt in ("-d", "--doi"):
            base_doi_filter = arg
        if opt in ("-c", "--communities"):
            communities = arg

    if not rem:
        sys.exit(3)

    list_file_records = []
    for filename in glob.glob(os.path.join(input_folder, input_file)):
        list_file_records.append(filename)

    if not list_file_records:
        print("No files to parse for records")
        sys.exit(2)
    converter = Converter(list_file_records, rem[0], base_doi_filter, communities)
    json_records = converter.record_with_json_field_from_marc()
    if output_file == "stdout":
        print(json_records)
    else:
        with open(output_file, "w") as output_json:
            json.dump(json_records, output_json, indent=2)

    print("Created a json with %d records"%len(json_records))


if __name__ == "__main__":
    main()